



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.3">
    
    
      
        <title>Neuron OmniBot - ADLINK Neuron Documents</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#neuron-omni-bot" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="ADLINK Neuron Documents" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ADLINK Neuron Documents
              </span>
              <span class="md-header-nav__topic">
                Neuron OmniBot
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    ADLINK Neuron Documents
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../sema-user-guide/" title="Neuron SEMA User Guide" class="md-nav__link">
      Neuron SEMA User Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../neuron-ddsbot/" title="Neuron DDSBot" class="md-nav__link">
      Neuron DDSBot
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../neuron-neuronbot/" title="Neuron NeuronBot" class="md-nav__link">
      Neuron NeuronBot
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Neuron OmniBot
      </label>
    
    <a href="./" title="Neuron OmniBot" class="md-nav__link md-nav__link--active">
      Neuron OmniBot
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#features" title="Features" class="md-nav__link">
    Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting Started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing" title="Installing" class="md-nav__link">
    Installing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-hardware-setup" title="a) hardware setup" class="md-nav__link">
    a) hardware setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-software-setup" title="b) software setup" class="md-nav__link">
    b) software setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-demo" title="Run the demo" class="md-nav__link">
    Run the demo
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-omnibot-driver" title="a) OmniBot driver" class="md-nav__link">
    a) OmniBot driver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-laser-slam" title="b) Laser Slam" class="md-nav__link">
    b) Laser Slam
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-robot-localization" title="c) Robot Localization" class="md-nav__link">
    c) Robot Localization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-navigation" title="d) Navigation" class="md-nav__link">
    d) Navigation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-machines" title="Multiple Machines" class="md-nav__link">
    Multiple Machines
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-tricks" title="Useful tricks" class="md-nav__link">
    Useful tricks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linuxubuntu-terminal" title="Linux/Ubuntu terminal" class="md-nav__link">
    Linux/Ubuntu terminal
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros-tools" title="ROS tools" class="md-nav__link">
    ROS tools
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-info" title="More Info" class="md-nav__link">
    More Info
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#videos" title="Videos" class="md-nav__link">
    Videos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference" title="Reference" class="md-nav__link">
    Reference
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notice" title="Notice" class="md-nav__link">
    Notice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version" title="Version" class="md-nav__link">
    Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authors" title="Authors" class="md-nav__link">
    Authors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#license" title="License" class="md-nav__link">
    License
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acknowledgments" title="Acknowledgments" class="md-nav__link">
    Acknowledgments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-roadmap" title="future roadmap" class="md-nav__link">
    future roadmap
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#features" title="Features" class="md-nav__link">
    Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting Started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing" title="Installing" class="md-nav__link">
    Installing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-hardware-setup" title="a) hardware setup" class="md-nav__link">
    a) hardware setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-software-setup" title="b) software setup" class="md-nav__link">
    b) software setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-demo" title="Run the demo" class="md-nav__link">
    Run the demo
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-omnibot-driver" title="a) OmniBot driver" class="md-nav__link">
    a) OmniBot driver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-laser-slam" title="b) Laser Slam" class="md-nav__link">
    b) Laser Slam
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-robot-localization" title="c) Robot Localization" class="md-nav__link">
    c) Robot Localization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-navigation" title="d) Navigation" class="md-nav__link">
    d) Navigation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-machines" title="Multiple Machines" class="md-nav__link">
    Multiple Machines
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-tricks" title="Useful tricks" class="md-nav__link">
    Useful tricks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linuxubuntu-terminal" title="Linux/Ubuntu terminal" class="md-nav__link">
    Linux/Ubuntu terminal
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros-tools" title="ROS tools" class="md-nav__link">
    ROS tools
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-info" title="More Info" class="md-nav__link">
    More Info
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#videos" title="Videos" class="md-nav__link">
    Videos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference" title="Reference" class="md-nav__link">
    Reference
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notice" title="Notice" class="md-nav__link">
    Notice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version" title="Version" class="md-nav__link">
    Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authors" title="Authors" class="md-nav__link">
    Authors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#license" title="License" class="md-nav__link">
    License
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acknowledgments" title="Acknowledgments" class="md-nav__link">
    Acknowledgments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-roadmap" title="future roadmap" class="md-nav__link">
    future roadmap
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="neuron-omni-bot">Neuron Omni Bot</h1>
<p>This is a demo package of Neuron Omni Bot's autonomous and fast integration capability using ROS<br />
<img alt="Omnibare" src="../neuron-omnibot/Omnibot_bare.jpg" /></p>
<h2 id="features">Features</h2>
<ul>
<li>Fully integration between SEMA library and ROS2</li>
<li>Three omni-directional poly wheels with a 12V 4.32 watt DC motor on each wheel</li>
<li>Quadrature hall effect encoder provide 390 pulses (1560 count) per wheel revolution</li>
<li>Fully customized <abbr title="Vehicle Dynamic and Motor Controller">VDMC</abbr> using STM32F103 chip</li>
<li>Fully customized ROS motor driver node that utilize standard ROS convension</li>
<li>MPU6050 6-axis IMU and it's corresponding ROS publisher with standard ROS state estimator</li>
<li>Easy to use ROS launch file with maximum custimization capabilities</li>
<li>Finely tuned ROS navigation, guidance, and control algorithms with full list of parameters provided</li>
<li>Multiple user interfaing methods using the SEMA library</li>
</ul>
<h2 id="getting-started">Getting Started</h2>
<p>These instructions will get you a copy of this demo and running on your local machine. If you're unfamiliar with ROS operation, there are some usefull trick you may want to try in the <a href="#useful-tricks">section below</a> For multiple machine remote control, please visit <a href="#multiple-machines">multi-machines</a> section below.
<img alt="Neuron OmniBot" src="../neuron-omnibot/Neuron%20OmniBot.jpg" /></p>
<h3 id="prerequisites">Prerequisites</h3>
<ol>
<li>Neuron hardware and SEMA library<br />
You'll need the ADLINK SEMA library and a compatible motherboard to run this example. You can conatct <strong>TODO: SOMEONE</strong> for more information.</li>
<li>Download the source of this project to your ROS (catkin) workspace<br />
<code>cd catkin_ws/src
    git clone https://github.com/EwingKang/Neuron-OmniBot.git neuron_omnibot</code>  </li>
<li>Some electronics hardware: 3 LEDs, 3 contact switches, 1 tactile(push) switch</li>
<li>Laser scanner with its corresponding ROS node properly installed.</li>
<li>Wires properly connected (see <a href="#hardware-setup">hardware setup section</a> below)</li>
</ol>
<h3 id="installing">Installing</h3>
<h4 id="a-hardware-setup">a) hardware setup</h4>
<p>Connect all the wire properly according to this diagram: (<a href="../doc/OmniBot%20wiring.jpg?raw=true">click to download</a>)
<img alt="OmniBot wiring" src="../neuron-omnibot/OmniBot%20wiring.jpg" /></p>
<ol>
<li><abbr title="Vehicle Dynamic and Motor Controller">VDMC</abbr> <sup><a href="#reference">manual</a></sup><ol>
<li>connect 12V power from Neuron PSU</li>
<li>Connect UART port to MAX232 or any equivilant UART-RS232 bridge chip (<strong>NOTE: some manufacture may have their RX/TX label reversed</strong>)</li>
<li>connect to Neuron serial port 2</li>
</ol>
</li>
<li>Laser scanner (ex. YDLidar)<ol>
<li>USB wire</li>
<li>5v power (from SEMA feature connector SB5V is recommand)</li>
</ol>
</li>
<li>SEMA peripherals (collision detection, state indication LEDs)<ul>
<li>LEDs: positive to GPIO, Negative to GND</li>
<li>switches: across GPIO and GND</li>
</ul>
</li>
<li>Other recommandations<ul>
<li>It is recommanded to have your robot's sharp edges wraped</li>
<li>DO NOT obstruct the view of laser scanner</li>
<li>Your two wifi antennas should be pointing perpendicular(i.e. 90 degrees) to each other</li>
<li>ALWAYS put on your balance lead monitor if your using Li-Po batteries</li>
</ul>
</li>
</ol>
<h4 id="b-software-setup">b) software setup</h4>
<ol>
<li>
<p>Install ADLINK SEMA
Your Neuron Bot should already have proper SEMA installed. Please go to <strong>TODO: EMPTY PROJECT</strong> if you have any questions.</p>
</li>
<li>
<p>Install ROS kinetic and setup workspace
    Your Neuron Bot should already have ROS set. If not, you mar refer to <a href="http://wiki.ros.org/kinetic/Installation/Ubuntu">the install guide</a>, and <a href="http://wiki.ros.org/catkin/Tutorials/create_a_workspace">catkin_ws setup guide</a>. Make sure you have environmental path add to .bashrc to save time</p>
</li>
<li>
<p>Install packages (ubuntu software):</p>
<ul>
<li>
<p>ROS stuff</p>
<ul>
<li>
<p>robot localization
<code>sudo apt-get install ros-kinetic-robot-localization</code></p>
</li>
<li>
<p>laser slam
<code>sudo apt-get install ros-kinetic-gmapping ros-kinetic-scan-tools\ ros-kinetic-navigation # laser slam</code></p>
</li>
<li>
<p>navigation and planning
<code>sudo apt-get install ros-kinetic-teb-local-planner ros-kinetic-teb-local-planner-tutorials\ ros-kinetic-eband-local-planner</code></p>
</li>
</ul>
</li>
<li>
<p>Recommanded</p>
<ul>
<li>KATE: text editor (very similar to Notepad++)
<code>sudo apt-get install kate</code></li>
<li>htop: a low-cost system monitor
<code>sudo apt-get install htop</code></li>
<li>serial port terminoa (GUI monitor) 
<code>sudo apt-get install gtkterm</code></li>
<li>OBS</li>
<li>SSH server
<code>sudo apt-get install openssh-server</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Set up SEMA soft link
Change to any node that uses SEMA library, find the SEMA include library header location, and run the auto shell command file. 
    <code>cd ${project_root}/lib
        e.g.: cd catkin_ws/src/neuron_omnibot/neuron_demo_gpio/lib
    ./setlink.sh</code><br />
    Note: If you get some error like <em><code>error: no such file as...</code></em>, you'll need to make the setlink.sh executable by <code>chmod +x setlink.sh</code> after you've changed the command prompt to that directory.      </p>
</li>
<li>
<p>Compile the source code<br />
Now, we'll use the Catkin, the ROS build management tool to build our nodes. We'll need root access for library linking for anything that uses SEMA. Root access is gained by the second step below. Great power comes with great responsibility, <strong>it is strongly recommanded you to exit root mode</strong> since you can to terrible stuff with that much of power.
    <code>cd ~/catkin_ws
    sudo -sE
    catkin_make
    exit   #exit root mode</code>  </p>
</li>
<li>
<p>Setup Laser scanner port (from <a href="https://github.com/EAIBOT/ydlidar">YDLidar github</a>)
    <code>roscd ydlidar/startup
    sudo chmod 777 ./*
    sudo sh initenv.sh</code></p>
</li>
<li>
<p>Add serial access
    <code>sudo adduser ros dialout</code></p>
</li>
</ol>
<h3 id="run-the-demo">Run the demo</h3>
<p>The Neuron Omnibot demo can be divided into four part:
<em> <a href="#omnibot-driver">Omnibot IO</a>: motor controller, laser scanner, LED indecators, and servos
</em> <a href="#blaser-slam">SLAM</a>: simultaneous localization and mapping
<em> <a href="#crobot-localization">Localization</a>: after we build our 2D map
</em> <a href="#dnavigation">Move!</a>: Obstacle detecting, planning, trajectory generation, and vehicle control  </p>
<p>Each of the above function is wraped as a single ROS launch file for user's easy execution. We'll have a step-by-step tutorial below. For each launch file, we'll open a new terminal. You can do that by pressing <em><code>ctrl + alt + t</code></em>  </p>
<h4 id="a-omnibot-driver">a) OmniBot driver</h4>
<p>In this section, we'll start our ROS omnibot driver. The driver includes all the IO and sensory device including motor controller, encoder odometry, laser scanner, and IMU state estimation.<br />
<img alt="omni_base_driver" src="../neuron-omnibot/screenshots/omni_base_driver.jpg" />
<img alt="nodegraph_omni_base_driver.svg" src="../neuron-omnibot/ROS%20graphs/nodegraph_omni_base_driver.svg" />
<img alt="frames_omni_base_driver.svg" src="../neuron-omnibot/ROS%20graphs/frames_omni_base_driver.svg" /></p>
<ol>
<li>
<p>roscore<br />
roscore is the core of the ROS as its name suggest. We encourage you to manually start the core on a seperate window because it gives user the power and responsibility to control everything.
    <code>roscore</code></p>
</li>
<li>
<p>Robot Base driver
    This launch file include multiple node. It launches the communication between STM32 motor controller, laser slam, as well as all the robot TF definition. Please note that if you're ending the node by <code>ctrl + c</code>, you only have to hit once and give it a seconds for it to shutdown automatically. The LaserScan node requies some time to shutdown the serial port.
    <code>roslaunch omni_base_driver omni_localization.launch</code></p>
</li>
<li>Keyboard controller node
We use <a href="http://wiki.ros.org/teleop_twist_keyboard">teleop_twist_keyboard</a> as our manual driver. The default command is a little too fast, so use <code>x</code> and <code>c</code> to reduce velocity to around 0.3. 
    <code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py</code>
    Note: because Neuron OmniBot is a holonomic robot, you can hold <code>shift</code>+moving around command to do translational moving.</li>
<li>RVIZ monitoring
    RVIZ stands for ROS-VIsualiZation, which is a powerfull 3-D visualization environment. We can launch RVIZ simply by:
    <code>rviz</code>
    Now, use the "File -&gt; Open Config" or <code>ctrl + o</code> to  open base  visualization settings located at <code>$(omni_base_driver)/rviz_config/omni_driver_laser.rviz</code>. One should note that despite it is easier to simply use the gui provided to open the rviz config file, it is possible to use command line by adding <strong>absolute path</strong>:
    <code>rviz -d "/home/ros/catkin_ws/src/neuron_omnibot/omni_base_slam/rviz_config/omni_slam.rviz"</code></li>
</ol>
<h4 id="b-laser-slam">b) Laser Slam</h4>
<p>In this section, we'll build our map with our 2D laser scanner.<br />
<img alt="omni_slam" src="../neuron-omnibot/screenshots/omni_slam.jpg" />
<img alt="nodegraph_omni_slam" src="../neuron-omnibot/ROS%20graphs/nodegraph_omni_slam.svg" />
<img alt="frames_omni_slam" src="../neuron-omnibot/ROS%20graphs/frames_omni_slam.svg" /></p>
<ol>
<li>Make sure you have everything in the <a href="#omni-bot-driver">base driver</a>  launched. This includes all the robot TF, motor driver, and laser scanner. </li>
<li>Setup rviz correctly so we can see everything:
   you can open <code>($ omni_base_slam)/rviz_config/omni_slam.rviz</code> manually, or by running the following command:
   <code>rviz -d "/home/ros/catkin_ws/src/neuron_omnibot/omni_base_slam/rviz_config/omni_slam.rviz"</code></li>
<li>Let's start the laser localization and mapping procedure with <a href="http://wiki.ros.org/gmapping">gmapping</a> by the following command:
    <code>roslaunch omni_base_slam omni_gmapping.launch</code></li>
<li>Drive around using keyboard driver introduced in <a href="#omni-bot-driver">base driver</a>.</li>
<li>After you map the whole place, remember to save the map <strong>before</strong> closing the gmapping:
    <code>rosrun map_server map_saver -f map_file_name</code>
    A map file(.x)  and a config file (.xxx) will be saved under your user home <code>~/</code>, make sure to move both of these files to <code>($ omni_base_slam)/map/</code></li>
<li>Stop the gmapping by <code>ctrl + c</code> on the gmapping terminal (terminal of the step.4).</li>
</ol>
<h4 id="c-robot-localization">c) Robot Localization</h4>
<p>After we acquired a static map, it is often that we do not run a SLAM package all the time due to its comutational load. In this step, we'll uses the the AMCL package to help us find the robot's location given previously generated map and current laser scan.
<img alt="localize" src="../neuron-omnibot/screenshots/localize.jpg" />
<img alt="nodegraph_localize" src="../neuron-omnibot/ROS%20graphs/nodegraph_localize.svg" />
<img alt="frames_localize" src="../neuron-omnibot/ROS%20graphs/frames_localize.svg" /></p>
<ol>
<li>Make sure you have everything in the <a href="#omni-bot-driver">base driver</a>  launched. This includes all the robot TF, motor driver, and laser scanner. </li>
<li>Setup rviz correctly so we can see everything:
   you can open <code>($ omni_base_nav)/rviz_config/omni_amcl.rviz</code> with rviz gui, or by running the following command:
       <code>rviz -d "/home/ros/catkin_ws/src/neuron_omnibot/omni_base_nav/rviz_config/omni_amcl.rviz"</code></li>
<li>Put the map file and its config file to <code>($ omni_base_slam)/map/</code> as stated in the previous section. Modify line 4 of <code>($ omni_base_nav)/omni_localize.launch</code>,, the <code>args=</code> tags in the map server, to reflect the correct file name.</li>
<li>Now, we'll start our localization package <a href="http://wiki.ros.org/amcl">amcl</a> with our costumized settings:
    <code>roslaunch omni_base_nav omni_localize.launch</code>
    By default, the localization package will initialize the robot at (x,y)=(0,0), i.e. same as the starting pose when we started the mapping process. However, we can manually assign the starting position by using "set 2D pose estimation" function in the RVIZ if it's not the case. Select the tool, click on the position and drag the arrow for its initial heading. This is shown in the picture below, the "2D pose estimation" is marked by a red square at the upper banner.
    <img alt="localize_arrow" src="../neuron-omnibot/screenshots/localize_arrow.jpg" /></li>
<li>Now we've initialize the robot pose, we can see many arrows in the RVIZ world. These arrows are the particles used to localize the robot. Because of how the Monte Carlo method (AMCL) works, those poses will not update nor converge if the robot remains still. With that being said, we can still ask the localization to try to update by:
    <code>rosservice call /request_nomotion_update</code>
    And you'll see the arrows become more unison and your laser scaning pattern will gradually match with the map.</li>
<li>It is often possible for robot to identify it's initial location without manually set the initiali pose. You can call this service so the localization package will evenly distribute the pose particle. After the global initialization, you can perform multiple no-motion-update mentioned above  and the package will localize itself.
    <code>rosservice call /global_localization</code></li>
</ol>
<h4 id="d-navigation">d) Navigation</h4>
<p>With OmniBot localized, we can now do our planning. In this demonstratino, we utilize the <a href="http://wiki.ros.org/move_base">move base</a> structure in the ROS <a href="http://wiki.ros.org/navigation">navigation stack</a>. This is a very textbook and complete structure of such system.
<img alt="nav" src="../neuron-omnibot/screenshots/nav.jpg" />
<img alt="nodegraph_nav" src="../neuron-omnibot/ROS%20graphs/nodegraph_nav.svg" />
<img alt="frames_nav" src="../neuron-omnibot/ROS%20graphs/frames_nav.svg" /></p>
<ol>
<li><a href="#omni-bot-driver">base driver</a> is started</li>
<li><a href="#robot-loclization">localization</a> is initilized</li>
<li>RVIZ is set to <code>($ omni_base_nav)/rviz_config/omni_nav.rviz</code></li>
<li>There are three different popular local planning package for you to choose: the <a href="http://wiki.ros.org/dwa_local_planner">Dynamic Window Approach</a>, the <a href="http://wiki.ros.org/teb_local_planner">Timed Elastic Band</a> planner, and the <a href="http://wiki.ros.org/eband_local_planner">Elastic Band</a> planner. You can choose from one of the following command:
    <code>roslaunch omni_base_nav omni_nav_dwa.launch
    roslaunch omni_base_nav omni_nav_teb.launch
    roslaunch omni_base_nav omni_nav_eband.launch</code></li>
<li>After the planner is started, you should see something like the graph below in the RVIZ. You can choose the "2D nav goal" tools on the top banner of the RVIZ. Click on the map and drage to specify the target orientation. The robot should drive toward the goal by itself.
<img alt="nav_arrow" src="../neuron-omnibot/screenshots/nav_arrow.jpg" />
The background gray map is the global map, while the colorful blue-pink-red one is the 1.5x1.5 meter local map. The global path is drawn in cyan while the local planner is draw in blue. Different local planner will have different representation.</li>
</ol>
<h2 id="multiple-machines">Multiple Machines</h2>
<p>Typically, it is not so convenient to have your mouse, keyboard and monitor connect to the robot while the robot move around. Fortunately, ROS is constructed in such a way that running the same ROS across multiple machines is very easy. In fact, there is a <a href="http://wiki.ros.org/ROS/Tutorials/MultipleMachines">simple official tutorial</a> about it.<br />
The physical Networking can be easily achieved (and expanded) with a single wifi router as shown below:
<img alt="TwoMachines" src="../neuron-omnibot/TwoMachines.jpg" /></p>
<ol>
<li>First, findout the OmniBot's IP address. This can be done with linux command <code>ifconfg</code>.</li>
<li>setup environmental variable. We'll add the variable to the hidden file "<strong>.bashrc</strong>". You can <code>ctrl+h</code> to show hidden file, and edit the "<strong>.bashrc</strong>" manually or by following command:
    <code>echo 'export ROS_IP=YOUR_OMNIBOT_IP' &gt;&gt; ~/.bashrc
    echo 'export ROS_MASTER_URI=http://$ROS_IP:11311' &gt;&gt; ~/.bashrc</code>
    This step should be done on both station and the OmniBot.  </li>
<li>Since we don't have monitor nor keyboard connected, everything will be executed remotely. First, Let's make sure our machines can reach each other by
    <code>ping NeuronBot.local
    # or
    ping YOUR_OMNIBOT_IP</code></li>
<li>
<p>We'll setup the SSH connection. (In case you don't have that on the OmniBot, do that now as this <a href="#software-setup">previous section</a> has said). This can be easily done by:
    <code>ssh NeuronBot.local
    # or
    ssh YOUR_OMNIBOT_IP</code></p>
</li>
<li>
<p>At the OmniBot SSH connection, start byobu so we can have multiple terminal in a single SSH connection
    <code>byobu</code>
    now, you can add new terminal with <code>F2</code>, switch between terminals with <code>F3</code> and <code>F4</code>, exit with command <code>exit</code></p>
</li>
<li>Run omniBot nodes on the Omni Bot through SSH terminal. </li>
<li>RVIZ and all the other things on the station machine</li>
<li>Play and fun!</li>
</ol>
<h2 id="useful-tricks">Useful tricks</h2>
<h3 id="linuxubuntu-terminal">Linux/Ubuntu terminal</h3>
<ul>
<li><code>ctrl + shift + T</code> to open new terminal tab</li>
<li><code>ctrl + PageUp/PageDn</code> to switch between tabs</li>
</ul>
<h3 id="ros-tools">ROS tools</h3>
<ul>
<li><code>rqt</code> ROS - QT, ROS information visualization tools</li>
<li><code>rostopic</code>: ROS topic server functions<ul>
<li><code>rostopic list</code>  to list all topics </li>
<li><code>rostopic echo /SOME_TOPIC</code> to print the topic directly.</li>
</ul>
</li>
<li><code>rosservice</code>  : ROS service server functions</li>
</ul>
<h2 id="more-info">More Info</h2>
<h3 id="videos">Videos</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/BLua6SY8mh4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/-oJpUHXYUhs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/utoLoRYI5qc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/QqNPT3JQaK4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

<h3 id="reference">Reference</h3>
<p><a href="../neuron-omnibot/Neuron%20OmniBot%20VDMC%20Manual.pdf?raw=true">Neuron VDMC Communication and operation manual</a></p>
<h3 id="notice">Notice</h3>
<ol>
<li>SEMA requries root access since it needs to talk to the hardware. Execute <code>SUDO -sE</code> before program launch to retain proper shell environment variable.</li>
</ol>
<h3 id="version">Version</h3>
<p>0.3.0</p>
<h3 id="authors">Authors</h3>
<ul>
<li><strong>Ewing Kang</strong> - <em>VDMC algorithm developer/ ROS implementation</em> - (https://github.com/EwingKang)</li>
<li><strong>Alan Chen</strong> - <em>SEMA library example</em> - (alan.chen@adlinktech.com)</li>
</ul>
<h3 id="license">License</h3>
<p>This project is licensed under the Apache License, Version 2.0</p>
<h3 id="acknowledgments">Acknowledgments</h3>
<p>The development of this project is under support and collabration of ADLINK Advanced Robotic Platform Group(ARPG). </p>
<h3 id="future-roadmap">future roadmap</h3>
<ul>
<li>[ ] Object recgonition and tracking using movidius</li>
<li>[ ] Peripheral sensors and robot casing (with fully SEMA integration)</li>
<li>[ ] VDMC <ul>
<li>[ ] On-board Kalman filter with full state omniBot dynamics estimater</li>
<li>[ ] High performance nonlinear-dynamic inversion controller</li>
</ul>
</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../neuron-neuronbot/" title="Neuron NeuronBot" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Neuron NeuronBot
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/Adlink-ROS" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.youtube.com/channel/UCscUHwoBilWqTBkN0KNoEkQ/videos" class="md-footer-social__link fa fa-youtube"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
        <script src="../javascripts/extra.js"></script>
      
    
    
      
    
  </body>
</html>